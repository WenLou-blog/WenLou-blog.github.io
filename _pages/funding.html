---
layout: archive
permalink: /funding/
title: "Research Funding"
author_profile: true
---

{% include base_path %}

<!-- 调试信息开始 -->
<div style="background: #f5f5f5; padding: 10px; margin-bottom: 20px; border-left: 4px solid #007acc;">
  <h3>调试信息</h3>
  <ul>
    <li><strong>总经费项目数</strong>: {{ site.funding | size }}</li>
    <li><strong>外部经费数</strong>: {{ site.funding | where: "type", "External Funding" | size }}</li>
    <li><strong>内部经费数</strong>: {{ site.funding | where: "type", "Internal Funding" | size }}</li>
  </ul>
  
  {% if site.funding.size > 0 %}
    <h4>所有经费项目:</h4>
    <ul>
    {% for post in site.funding %}
      <li>
        <strong>标题</strong>: {{ post.title }}<br>
        <strong>类型</strong>: {{ post.type }}<br>
        <strong>机构</strong>: {{ post.agency }}<br>
        <strong>日期</strong>: {{ post.date }}<br>
        <strong>文件路径</strong>: {{ post.path }}
      </li>
    {% endfor %}
    </ul>
  {% else %}
    <p><strong>警告</strong>: 没有找到任何经费数据</p>
  {% endif %}
</div>
<!-- 调试信息结束 -->

<h2>External Funding</h2>

{% assign external_funding = site.funding | where: "type", "External Funding" %}

{% if external_funding.size == 0 %}
  <p style="color: #666; font-style: italic;">暂无外部经费数据</p>
{% else %}
  {% capture written_year %}'None'{% endcapture %}
  {% for post in external_funding reversed %}
    {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
    {% if year != written_year %}
      <h3 id="external-{{ year | slugify }}" class="archive__subtitle">{{ year }}</h3>
      {% capture written_year %}{{ year }}{% endcapture %}
    {% endif %}
    {% include archive-single.html %}
  {% endfor %}
{% endif %}

<h2>Internal Funding</h2>

{% assign internal_funding = site.funding | where: "type", "Internal Funding" %}

{% if internal_funding.size == 0 %}
  <p style="color: #666; font-style: italic;">暂无内部经费数据</p>
{% else %}
  {% capture written_year %}'None'{% endcapture %}
  {% for post in internal_funding reversed %}
    {% capture year %}{{ post.date | date: '%Y' }}{% endcapture %}
    {% if year != written_year %}
      <h3 id="internal-{{ year | slugify }}" class="archive__subtitle">{{ year }}</h3>
      {% capture written_year %}{{ year }}{% endcapture %}
    {% endif %}
    {% include archive-single.html %}
  {% endfor %}
{% endif %}
